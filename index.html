<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EpubReader</title>
  <!-- JSZip -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <!-- EPUB.js -->
  <script src="lib/epub.min.js"></script>
  <!-- Supabase v1 -->
  <script src="https://unpkg.com/@supabase/supabase-js@1"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Barre supÃ©rieure -->
  <header class="top-bar">
    <button class="menu-toggle" id="menu-toggle" aria-label="Menu">
      <span class="hamburger-icon">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>
    <div class="top-bar-user"></div>
    <button class="add-book-toggle" id="add-book-toggle" aria-label="Ajouter un livre">+</button>
  </header>

  <!-- Menu latÃ©ral gauche -->
  <nav class="side-menu" id="side-menu">
    <div class="side-menu-content">
      <div class="side-menu-user"></div>
      
      <div class="side-menu-items">
        <button class="side-menu-item active" data-tab="library">
          ğŸ“š Livres
        </button>
        <button class="side-menu-item" data-tab="animes">
          ğŸ¬ Animes
        </button>
        <!-- CATALOGUE - Pour rÃ©activer, dÃ©commentez les 3 lignes ci-dessous
        <button class="side-menu-item" data-tab="catalog">
          ğŸ“– Catalogue
        </button>
        -->
      </div>
      
      <button class="side-menu-logout" id="side-menu-logout">
        ğŸšª DÃ©connexion
      </button>
    </div>
  </nav>

  <!-- Overlay -->
  <div class="menu-overlay" id="menu-overlay"></div>

  <!-- Panneau latÃ©ral droit - Ajouter un livre -->
  <div class="right-panel" id="right-panel">
    <div class="right-panel-content">
      <div class="right-panel-header">
        <h2 id="right-panel-title">ğŸ“š Ajouter un livre</h2>
        <button class="right-panel-close" id="right-panel-close">âœ•</button>
      </div>

      <div class="right-panel-body">
        <!-- Contenu pour les livres -->
        <div id="books-panel-content">
          <!-- Bouton Anna's Archive -->
          <a href="https://fr.annas-archive.se/search?index=&page=1&sort=&ext=epub&display=&q=" 
             target="_blank" 
             class="annas-archive-btn">
            ğŸ” Rechercher sur Anna's Archive
          </a>

          <div class="section-divider">ou</div>

          <!-- Recherche intÃ©grÃ©e -->
          <div class="search-box-panel">
            <input 
              type="text" 
              id="search-input-panel" 
              placeholder="Titre, auteur, ISBN..."
              autocomplete="off"
            >
            <button id="search-button-panel">Rechercher</button>
          </div>

          <div id="search-status-panel"></div>
          <div id="search-results-panel"></div>

          <div class="section-divider">ou</div>

          <!-- Ajout direct par lien -->
          <div class="direct-add-section">
            <label for="direct-download-link">Lien de tÃ©lÃ©chargement direct :</label>
            <input 
              type="text" 
              id="direct-download-link" 
              class="download-link-input"
              placeholder="https://ipfs.io/ipfs/... ou https://download.library.lol/..."
            >
            <button class="modal-button primary" id="direct-add-btn">
              ğŸ“¥ TÃ©lÃ©charger et ajouter
            </button>
            <div id="direct-add-status"></div>
          </div>
        </div>

        <!-- Contenu pour les animes -->
        <div id="animes-panel-content" style="display: none;">
          <!-- Recherche VF -->
          <div class="anime-search-section">
            <h3 class="anime-search-title">ğŸ‡«ğŸ‡· Recherche VF</h3>
            <div class="search-box-panel">
              <input 
                type="text" 
                id="search-anime-vf-input" 
                placeholder="Nom de l'anime..."
                autocomplete="off"
              >
              <button id="search-anime-vf-btn">Rechercher</button>
            </div>
          </div>

          <div class="section-divider">ou</div>

          <!-- Recherche VOSTFR -->
          <div class="anime-search-section">
            <h3 class="anime-search-title">ğŸ‡¯ğŸ‡µ Recherche VOSTFR</h3>
            <div class="search-box-panel">
              <input 
                type="text" 
                id="search-anime-vostfr-input" 
                placeholder="Nom de l'anime..."
                autocomplete="off"
              >
              <button id="search-anime-vostfr-btn">Rechercher</button>
            </div>
          </div>

          <div id="anime-search-status"></div>
          <div id="anime-search-results"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay pour panneau droit -->
  <div class="right-panel-overlay" id="right-panel-overlay"></div>

  <!-- Contenu de l'onglet BibliothÃ¨que -->
  <div id="library-tab" class="tab-content active">
    <div class="library-header">
      <h2>Livres</h2>
      <select id="status-filter" class="status-filter">
        <option value="all">Tous les livres</option>
        <option value="reading">En cours</option>
        <option value="unread">Non lu</option>
        <option value="read">Lu</option>
      </select>
    </div>
    <div id="epub-list"></div>
  </div>

  <!-- Menu contextuel pour changer le statut -->
  <div id="status-context-menu" class="context-menu" style="display: none;">
    <div class="context-menu-item" data-status="reading">ğŸ“– En cours</div>
    <div class="context-menu-item" data-status="unread">ğŸ“• Non lu</div>
    <div class="context-menu-item" data-status="read">âœ… Lu</div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item danger" data-action="remove">ğŸ—‘ï¸ Retirer de ma bibliothÃ¨que</div>
  </div>

  <!-- CATALOGUE - Pour rÃ©activer, dÃ©commentez la section ci-dessous
  <div id="catalog-tab" class="tab-content">
    <div id="catalog-list"></div>
  </div>
  -->

  <!-- Contenu de l'onglet Animes -->
  <div id="animes-tab" class="tab-content">
    <div class="library-header">
      <h2>Animes</h2>
    </div>
    <div id="animes-list"></div>
  </div>

  <script src="auth.js"></script>
  <script src="index.js"></script>
  <script src="search.js"></script>
  <script src="anime.js"></script>
</body>
</html>
